<% if @merchant.nil? %>
  <h3>Lost? <%= link_to "Try one of our other wonderful sellers", merchants_path %></h3>
<% end %>

<section>
  <h2><%= @merchant.username %></h2>
  <p>Registered seller with Etzzzz since <%= @merchant.created_at.year %></p>
  <p><%= @merchant.description %></p>
  <p>Questions about an order? <%= @merchant.email %></p>
</section>

<!--TODO - set up so this section only shows if this merchant is the logged in user -->
<section>
  <h3>Order history</h3>
  <% if @merchant.orders.empty? %>
    <p>You have no past orders</p>
  <% else %>
    <!--TODO - overall stats, and filter by status -->
    <table>

      <thead>
        <tr>
          <th>Date</th>
          <th>Products</th>
          <th>Quantity</th>
        </tr>
      </thead>

      <% @merchant.orders.each do |order| %>
        <tbody>
          <tr>
            <td>
              <%= order.created_at.strftime("%b %d, %Y") %> <!--TODO - link to the order show view -->
            </td>
            <% order.order_items.each do |item| %>
              <td>
                <% if item.product.merchant == @merchant %>
                  <%= item.product.name %>
                <% end %>
              </td>
              <td>
                <% if item.product.merchant == @merchant %>
                  <%= item.quantity %>
                <% end %>
              </td>
            <% end %>
          </tr>
        </tbody>
      <% end %>
    </table>
<% end %>
</section>
